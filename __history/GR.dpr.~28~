program GR;

uses
  System.StartUpCopy,
  FMX.Forms,
  System.SysUtils,
  Reunion in 'Reunion.pas' {Form1},
  base in 'base.pas' {DataModule1: TDataModule},
  Membre in 'Membre.pas' {Form2},
  Fiv in 'Fiv.pas' {Form3},
  user in 'user.pas' {Form4},
  login in 'login.pas' {Form5},
  Rfiv in 'Rfiv.pas' {Form6},
  uSplash in 'uSplash.pas' {FormSplash};

{$R *.res}

begin

  Application.Initialize;

  // --- Créer et afficher la fenêtre Splash ---
  FormSplash := TFormSplash.Create(nil);
  try
    FormSplash.Show;
    FormSplash.UpdateProgress(5, 'Initialisation...');

    // --- Charger les formulaires progressivement ---
    FormSplash.UpdateProgress(15, 'Chargement du module base...');
    Application.CreateForm(TDataModule1, DataModule1);
  Application.CreateForm(TFormSplash, FormSplash);
  FormSplash.UpdateProgress(30, 'Chargement du module Réunion...');
    Application.CreateForm(TForm1, Form1);

    FormSplash.UpdateProgress(45, 'Chargement du module Membre...');
    Application.CreateForm(TForm2, Form2);

    FormSplash.UpdateProgress(60, 'Chargement du module Fiv...');
    Application.CreateForm(TForm3, Form3);

    FormSplash.UpdateProgress(75, 'Chargement du module Utilisateur...');
    Application.CreateForm(TForm4, Form4);

    FormSplash.UpdateProgress(90, 'Chargement du module Rfiv...');
    Application.CreateForm(TForm6, Form6);

    FormSplash.UpdateProgress(100, 'Chargement terminé.');
    Sleep(300); // petite pause pour que la barre atteigne 100%

  finally
    // --- Fermer le Splash proprement ---
    FormSplash.Close;
    FormSplash.Free;
  end;
  Application.CreateForm(TForm1, Form1);
  Application.CreateForm(TForm5, Form5);
  Application.CreateForm(TDataModule1, DataModule1);
  Application.CreateForm(TForm2, Form2);
  Application.CreateForm(TForm3, Form3);
  Application.CreateForm(TForm4, Form4);
  Application.CreateForm(TForm6, Form6);
  Application.CreateForm(TFormSplash, FormSplash);
  Application.Run;
end.
